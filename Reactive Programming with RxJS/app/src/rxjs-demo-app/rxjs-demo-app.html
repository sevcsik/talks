<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="rxjs-demo-app">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>
		<p>The time is {{hours}}:{{minutes}}:{{seconds}}</p>
	</template>

	<script type="module">
		import { time$ } from '/src/services/time.js'

		const formatTime$ = m => {
			const MODULI = [ 60, 60, 60, 24 ]
			return time$.map(t => Math.floor(t / Math.pow(MODULI[m], m)) % MODULI[m + 1])
		}

		/**
		 * @customElement
		 * @polymer
		 */
		class RxjsDemoApp extends Polymer.Element {
			static get is() { return 'rxjs-demo-app' }

			constructor() {
				super();

				this.hours = this.minutes = this.seconds = null;

				formatTime$(0).subscribe(t => this.seconds = t)
				formatTime$(1).subscribe(t => this.minutes = t)
				formatTime$(2).subscribe(t => this.hours = t)

			}
		}

		window.customElements.define(RxjsDemoApp.is, RxjsDemoApp)
	</script>
</dom-module>
